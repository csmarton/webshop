{% extends "BackendLayoutBundle:Default:layout.html.twig" %}

{% block title%} WebShopAdmin - Rendelések {% endblock %}
{% block bodyClass %}class="index_page"{% endblock%}
 
{% block javascripts %}
	{{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/backendadmin/js/Order.js') }}"></script>
    <script type="text/javascript">
            $(document).ready(function(){
                Order.init();
            });
    </script>
{% endblock %}
{% block stylesheets %}   
    <link rel="stylesheet" href="{{ asset('bundles/backendadmin/css/Order.css') }}"/>
{% endblock %}
{% block main %} 
    <div class="main">
        <h2>Rendelések</h2>
        <div class="upperMenu">
            SZŰRÉS
        </div>
        
        <table class="product_table">
            <thead>
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Rendelő neve</th>
                    <th scope="col">Db</th>
                    <th scope="col">Ár</th>
                    <th scope="col">Rendelési idő</th>
                    <th scope="col">Teljesítési idő</th>
                    <th scope="col">Fizetési opció</th>
                    <th scope="col">Szállítási opció</th>
                    <th scope="col">Műveletek</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                    <tr>
                        <td>{{order.getId()}}</td>
                        <td>{{order.getUser().getProfile().getName()}}</td>
                        <td>{{order.getItemsTotal()}}</td>
                        <td>{{order.getItemsTotalPrice()|priceFormat}}</td>
                        <td>{{order.getOrderedAt()|date('Y:m:d')}}</td>
                        <td>
                            {% if(order.getPerformedAt() == NULL )%}
                                -
                            {% else %}
                                {{order.getPerformedAt()|date('Y:m:d')}}
                            {% endif %}
                            
                        </td>
                        <td>{{order.getPaymentOption().getName()}}</td>
                        <td>{{order.getShippingOption().getName()}}</td>
                        <td>
                            <a href="javascript:void(0)" class="menu_btn cancel_btn fulfill-button" link="{{path('backend_admin_order_fulfill', {'orderId':order.getId()})}}">Teljesítés</a>
                            <a href="{{path('backend_admin_order_list_more',{'orderId':order.getId()})}}" class="menu_btn edit_btn">Bővebben</a>                            
                        </td>
                    </tr>                    
                {% endfor %}
            </tbody>
        </table>        
    </div>
    
<div id="modal-fulfill-order" class="reveal-modal">
    <div class="formContent">
        <div class="topSection">
            <div class="modal-content">
                <h2></h2>
                <div class="modal-information"></div>
            </div>
        </div>
        <div class="bottomSection">
            <div class="inputs">
                <input type="button" class="cancel exit-reveal-modal cancel_btn menu_btn" value="Ok">                        
            </div>
        </div>
    </div>
</div>   
{% endblock %}
                  